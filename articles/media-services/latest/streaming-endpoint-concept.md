---
title: Puntos de conexión de streaming en Azure Media Services | Microsoft Docs
description: En este artículo se explica qué son los puntos de conexión de streaming y cómo los usa Azure Media Services.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 10/22/2018
ms.author: juliako
ms.openlocfilehash: 9d3aad92f5b0130f83e3023a2fdca5710d544311
ms.sourcegitcommit: da3459aca32dcdbf6a63ae9186d2ad2ca2295893
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/07/2018
ms.locfileid: "51256058"
---
# <a name="streaming-endpoints"></a>Extremos de streaming

En Microsoft Azure Media Services (AMS), la entidad [Puntos de conexión de streaming](https://docs.microsoft.com/rest/api/media/streamingendpoints) representa un servicio de streaming que puede entregar contenido directamente a una aplicación de reproducción cliente o a una red Content Delivery Network (CDN) para la distribución posterior. La secuencia de salida del servicio de punto de conexión de streaming puede ser streaming en vivo o un recurso de vídeo a petición en la cuenta de Media Services. Cuando se crea una cuenta de Media Services, se genera automáticamente un punto de conexión de streaming **predeterminado** en estado detenido. No se puede eliminar el punto de conexión de streaming predeterminado. Es posible crear puntos de conexión de streaming adicionales en la cuenta. Para iniciar el streaming de vídeos, debe iniciar el punto de conexión de streaming. 

## <a name="streamingendpoint-types"></a>Tipos de StreamingEndpoint  

Existen dos tipos de **StreamingEndpoint**: **estándar** y **premium**. El tipo se define por el número de unidades de escalado (`scaleUnits`) que se asignan para el punto de conexión de streaming. 

En la tabla se describen los tipos:  

|Escriba|Unidades de escalado|DESCRIPCIÓN|
|--------|--------|--------|  
|**Punto de conexión de streaming estándar** (recomendado)|0|El tipo **estándar** es la opción recomendada para prácticamente todos los escenarios de streaming y tamaños de audiencia. El tipo **estándar** escala el ancho de banda de salida automáticamente. <br/>Para los clientes con requisitos muy exigentes, Media Services ofrece puntos de conexión de streaming **premium**, que pueden utilizarse para escalar horizontalmente la capacidad para las audiencias de Internet más grandes. Si espera una audiencia amplia y usuarios simultáneos, póngase en contacto con nosotros en amsstreaming@microsoft.com para obtener instrucciones sobre si debe pasar al tipo **premium**. |
|**Punto de conexión de streaming premium**|>0|Los puntos de conexión de streaming **Premium** son adecuados para cargas de trabajo avanzadas y proporcionan una capacidad de ancho de banda dedicada y escalable. Para pasar a un tipo **premium** se ajusta la propiedad `scaleUnits`. La propiedad `scaleUnits` proporciona capacidad de salida dedicada que puede adquirirse en incrementos de 200 Mbps. Cuando se usa el tipo **premium**, cada unidad habilitada proporciona capacidad de ancho de banda adicional a la aplicación. |

## <a name="working-with-cdn"></a>Trabajo con la red CDN

En la mayoría de los casos, tendrá la red CDN habilitada. Sin embargo, si prevé una simultaneidad máxima inferior a 500 visores, se recomienda deshabilitar la red CDN, ya que esta escala mejor con simultaneidad.

### <a name="detailed-explanation-of-how-caching-works"></a>Explicación detallada de cómo funciona el almacenamiento en caché

No hay ningún valor de ancho de banda específico al agregar la red CDN porque la cantidad de ancho de banda necesaria para un punto de conexión de streaming con red CDN habilitada varía. Un lote depende del tipo de contenido, su popularidad, la velocidad de bits y los protocolos. La red CDN solo almacena en caché lo que se solicita. Esto significa que se servirá contenido popular directamente desde la red CDN: siempre que el fragmento de vídeo esté almacenado en caché. Es probable que el contenido en vivo se almacene en caché porque suele haber muchas personas mirando exactamente lo mismo. El contenido a petición puede ser un poco más complejo porque podría haber parte del contenido que fuera popular y otra que no. Si hay millones de recursos de vídeo que no son populares (solo 1 o 2 visores a la semana), pero hay miles de personas que miran vídeos diferentes, la red CDN pasa a ser mucho menos efectiva. Con estos errores de caché, se aumenta la carga en el punto de conexión de streaming.
 
También debe tener en cuenta cómo funciona el streaming adaptable. Cada fragmento de vídeo individual se almacena en caché como entidad propia. Por ejemplo, si la primera vez que una persona mira un determinado vídeo, omite parte y mira solo unos segundos aquí y allá, solo los fragmentos de vídeo asociados con lo que miró esa persona se almacenan en caché de la red CDN. Con el streaming adaptable, se suelen tener de 5 a 7 velocidades de bits de vídeo distintas. Si una persona está mirando a una velocidad de bits y otra persona a una velocidad de bits diferente, se almacenan en caché cada uno por separado en la red CDN. Incluso si dos personas están mirando a la misma velocidad de bits podrían transmitir en streaming a través de protocolos diferentes. Cada protocolo (HLS, MPEG-DASH, Smooth Streaming) se almacena en caché por separado. Por lo tanto, cada velocidad de bits y protocolo se almacenan en caché por separado y solo se almacenan en caché los fragmentos de vídeo que se han solicitado.
 
## <a name="streamingendpoint-properties"></a>Propiedades de StreamingEndpoint 

En esta sección se proporcionan detalles sobre algunas de las propiedades de StreamingEndpoint. Para obtener ejemplos de cómo crear un nuevo punto de conexión de streaming y las descripciones de todas las propiedades, vea [Streaming Endpoint](https://docs.microsoft.com/rest/api/media/streamingendpoints/create) (Punto de conexión de streaming). 

|Propiedad|DESCRIPCIÓN|  
|--------------|----------|
|`accessControl`|Se usa para configurar las siguientes opciones de seguridad para el punto de conexión de streaming: claves de autenticación de encabezado de firma de Akamai y direcciones IP que pueden conectarse a este punto de conexión.<br />Esta propiedad se puede establecer cuando la propiedad `cdnEnabled` se establece en false.|  
|`cdnEnabled`|Indica si la integración de Azure CDN para este punto de conexión de streaming está habilitada (está deshabilitada de forma predeterminada).<br /><br /> Si establece la propiedad `cdnEnabled` en true, se deshabilitarán las siguientes configuraciones: `customHostNames` y `accessControl`.<br /><br />No todos los centros de datos admiten la integración de Azure CDN. Para comprobar si su centro de datos tiene disponible la integración de la red Azure CDN, haga lo siguiente:<br /><br /> - Pruebe de establecer el valor de `cdnEnabled` en true.<br /><br /> - Compruebe el resultado devuelto de `HTTP Error Code 412` (PreconditionFailed) con el mensaje "Streaming endpoint CdnEnabled property cannot be set to true as CDN capability is not available in the current region" (La propiedad CdnEnabled de punto de conexión de streaming no se puede establecer en true ya que la capacidad de red CDN no está disponible en la región actual).<br /><br /> Si recibe este error, el centro de datos no la admite. Debe probar otro centro de datos.|  
|`cdnProfile`|Cuando la propiedad `cdnEnabled` está establecida en true, también puede pasar valores `cdnProfile`. El valor `cdnProfile` es el nombre del perfil CDN donde se creará el punto de conexión CDN. Puede proporcionar un cdnProfile existente o usar uno nuevo. Si el valor es NULL y `cdnEnabled` es true, se utiliza el valor predeterminado "AzureMediaStreamingPlatformCdnProfile". Si el valor `cdnProfile` proporcionado ya existe, se crea un punto de conexión debajo de él. Si el perfil no existe, se crea un nuevo perfil automáticamente.|
|`cdnProvider`|Cuando la red CDN está habilitada, también se pueden pasar valores `cdnProvider`. El valor `cdnProvider` controla qué proveedor se utilizará. Actualmente, se admiten tres valores: "StandardVerizon", "PremiumVerizon" y "StandardAkamai". Si no se proporciona ningún valor y la propiedad `cdnEnabled` es true, se utiliza "StandardVerizon" (es decir, es el valor predeterminado).|
|`crossSiteAccessPolicies`|Se usa para especificar las directivas de acceso entre sitios para varios clientes. Para obtener más información, consulte [Cross-domain policy file specification](http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html) (Especificación del archivo de directivas entre dominios) y [Making a Service Available Across Domain Boundaries](https://msdn.microsoft.com/library/cc197955\(v=vs.95\).aspx) (Hacer que un servicio esté disponible a través de los límites del dominio).|  
|`customHostNames`|Se usa para configurar un punto de conexión de streaming para que acepte el tráfico dirigido a un nombre de host personalizado. Esto facilita la configuración de la administración del tráfico a través de Global Traffic Manager (GTM) y también permite el uso de nombres de dominio con marca como nombre de punto de conexión de streaming.<br /><br /> La propiedad del nombre de dominio debe confirmarse mediante Azure Media Services. Azure Media Services comprueba la propiedad del nombre de dominio solicitando un registro `CName` que contenga el id. de cuenta de Azure Media Services como componente para agregarlo al dominio en uso. Por ejemplo, para que "sports.contoso.com" se use como nombre de host personalizado para el punto de conexión de streaming, se debe configurar un registro para `<accountId>.contoso.com` que apunte a uno de los nombres de host de comprobación de Media Services. El nombre de host de comprobación está formado por verifydns.\<zona-dns-mediaservices>. La tabla siguiente contiene las zonas DNS esperadas que se van a usar en el registro de comprobación para diferentes regiones de Azure.<br /><br /> Norteamérica, Europa, Singapur, Hong Kong, Japón:<br /><br /> - mediaservices.windows.net<br /><br /> - verifydns.mediaservices.windows.net<br /><br /> China:<br /><br /> - mediaservices.chinacloudapi.cn<br /><br /> - verifydns.mediaservices.chinacloudapi.cn<br /><br /> Por ejemplo, un registro `CName` que asigna "945a4c4e-28ea-45cd-8ccb-a519f6b700ad.contoso.com" a "verifydns.mediaservices.windows.net" prueba que el id. de Azure Media Services 945a4c4e-28ea-45cd-8ccb-a519f6b700ad tiene la propiedad del dominio contoso.com, lo que permite usar cualquier nombre de contoso.com como nombre de host personalizado para un punto de conexión de streaming en esa cuenta.<br /><br /> Para buscar el valor de id. de Media Services, vaya a [Azure Portal](https://portal.azure.com/) y seleccione su cuenta de Media Services. El ID. DE MEDIA SERVICES aparece a la derecha de la página PANEL.<br /><br /> **Advertencia**: Si se intenta establecer un nombre de host personalizado sin una comprobación adecuada del registro `CName`, se producirá un error de respuesta de DNS y se almacenará en caché durante algún tiempo. Una vez que haya un registro adecuado, podría tardar un tiempo hasta que se vuelva a validar la respuesta almacenada en caché. En función del proveedor de DNS para el dominio personalizado, podría tardar desde unos minutos a una hora en volver a validar el registro.<br /><br /> Además del registro `CName` que asigna `<accountId>.<parent domain>` a `verifydns.<mediaservices-dns-zone>`, debe crear otro registro `CName` que asigne el nombre de host personalizado (por ejemplo, `sports.contoso.com`) al nombre de host de su StreamingEndpoint de Media Services (por ejemplo, `amstest.streaming.mediaservices.windows.net`).<br /><br /> **Nota**: Los puntos de conexión de streaming ubicados en el mismo centro de datos no pueden compartir el mismo nombre de host personalizado.<br /> Esta propiedad es válida para los puntos de conexión de streaming estándar y premium y puede establecerse cuando "cdnEnabled": false<br/><br/> Actualmente, AMS no admite SSL con dominios personalizados.  |  
|`maxCacheAge`|Invalida el encabezado max-age de control de caché HTTP predeterminado establecido por el punto de conexión de streaming en fragmentos multimedia y manifiestos a petición. El valor se establece en segundos.|
|`resourceState`|Los valores para la propiedad son:<br /><br /> - Stopped. El estado inicial de un punto de conexión de streaming después de la creación.<br /><br /> - Starting. El punto de conexión de streaming está realizando la transición al estado en ejecución.<br /><br /> - Running. El punto de conexión de streaming es capaz de hacer streaming del contenido a clientes.<br /><br /> - Scaling. Las unidades de escalado se están aumentando o reduciendo.<br /><br /> - Stopping. El punto de conexión de streaming está realizando la transición al estado detenido.<br/><br/> - Deleting. Se está eliminando el punto de conexión de streaming.|
|`scaleUnits `|La propiedad scaleUnits proporciona capacidad de salida dedicada que puede adquirirse en incrementos de 200 Mbps. Si tiene que pasar a un tipo **premium**, ajuste la propiedad `scaleUnits`. |

## <a name="next-steps"></a>Pasos siguientes

En el ejemplo [de este repositorio](https://github.com/Azure-Samples/media-services-v3-dotnet-quickstarts/blob/master/AMSV3Quickstarts/EncodeAndStreamFiles/Program.cs) se muestra cómo iniciar el punto de conexión de streaming predeterminado con .NET.

